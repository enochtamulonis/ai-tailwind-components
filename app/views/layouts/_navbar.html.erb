<div class="h-16 w-full bg-gray-800 sticky top-0 z-[999]">
  <div class="max-w-7xl w-full mx-auto flex items-center h-full px-4 2xl:px-0">
    <%= link_to "/", class: "text-2xl text-gray-100" do %>
      <div class="flex items-center">
        <div class="w-8 mr-3">
          <%= image_tag "brain.svg" %>
        </div>
        <div class="hidden md:flex"> Tailwindcss Genius </div>
      </div>
    <% end %>
    <% if current_user %>
      <div class="ml-auto relative" data-controller="dropdown" data-action="click@window->dropdown#closeUnlessDropdown">
        <%= link_to "#", data: { action: "dropdown#toggle" } do %>
          <div class="relative">
            <%= image_tag current_user.avatar_display, class: "w-10 rounded-full" %>
            <% if !current_user.active_subscription.present? %>
              <span class="absolute -top-2 -right-12 bg-indigo-400 text-indigo-900 w-16 py-0.5 text-center rounded-full font-semibold">
                <%= current_user.daily_trys %> Daily
              </span>
            <% end %>
          </div>
        <% end %>
        <div class="absolute top-12 -left-40 2xl:-left-24 w-[12em] h-56 bg-gray-100 rounded-lg shadow-lg hidden backdrop-blur-lg z-50" data-dropdown-target="menu">
          <div class="p-2 grid gap-4">
            <%= link_to "My Components", ai_components_path, class: "text-lg text-gray-900" %>
            
            <% if !current_user.active_subscription %>
              <%= link_to "Upgrade Account", new_subscription_path, class: "text-lg bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-purple-500 hover:to-pink-600 rounded-lg text-indigo-900 text-center py-1 transition-all duration-1000" %>
            <% end %>

            <%= link_to "Settings", edit_user_registration_path, class: "text-lg text-gray-900" %>

            <div class="">
              <%= link_to "Sign out", destroy_user_session_path, data: { turbo_method: :delete }, class: "text-lg text-gray-900" %>
            </div>
          </div>
        </div>
      <% else %>
        <div class="ml-auto flex items-center gap-4">
          <%= link_to "Log in", new_user_session_path, class: "text-gray-100" %>
          <%= link_to "Create account", new_user_registration_path, class: "bg-indigo-500 text-indigo-100 shadow-lg rounded-lg p-2" %>
        </div>
      <% end %>
    </div>
  </div>
</div>